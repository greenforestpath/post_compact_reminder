{"id":"bd-1bf","title":"Unit tests: test_hook()","description":"Create tests/test_hook_validation.sh. Test test_hook() function: returns 0 and outputs reminder when given a valid hook script, returns non-zero for a script that outputs nothing, returns non-zero for a script that doesn't exist. Write a valid hook to a temp file and verify test_hook passes it. Write a broken hook and verify test_hook catches it.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:48:35.931908919Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.931908919Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1bf","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.931908919Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1d4","title":"E2E test: template application flow","description":"Create tests/test_e2e_templates.sh. Test all 4 templates end-to-end: for each template (minimal, detailed, checklist, default): 1) Install with --template <name> --yes, 2) Verify hook script contains template text, 3) Verify hook fires correctly for compact source, 4) Verify --show-template outputs the correct message, 5) Apply a different template and verify it replaced the previous one. Also test --interactive with piped input selecting each option. Log all output.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:50.075221443Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.075221443Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1d4","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.075221443Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1d4","depends_on_id":"bd-k3t","type":"blocks","created_at":"2026-01-26T21:49:50.075221443Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1eo","title":"Unit tests: logging functions","description":"Create tests/test_logging.sh. Test all 7 logging functions (log_info, log_warn, log_error, log_step, log_success, log_skip, log_verbose) plus log_to_file(). Verify: correct prefix/emoji in output, QUIET flag suppresses non-error output, VERBOSE flag enables log_verbose, NO_COLOR mode strips ANSI codes, log_to_file appends timestamped lines to LOG_FILE, log_error always outputs even when QUIET. Source the installer with a wrapper that prevents main() from running.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:48:35.712906501Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.712906501Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1eo","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.712906501Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1kj","title":"E2E test: force reinstall flow","description":"Create tests/test_e2e_force.sh. Test --force flag behavior: 1) Install normally, 2) Verify installed, 3) Run with --force, 4) Verify hook was replaced (check file modification time or content), 5) Verify settings still correct, 6) Verify hook still works. Log each step.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:22.294256415Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:22.294256415Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1kj","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:22.294256415Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1kj","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:22.294256415Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1kj","depends_on_id":"bd-gg3","type":"blocks","created_at":"2026-01-26T21:49:22.294256415Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1t8","title":"Unit tests: render_hook_script() and generate_hook_script()","description":"Create tests/test_hook_generation.sh. Test render_hook_script(): output starts with #!/usr/bin/env bash, contains set -e, contains the provided message text, embeds proper jq-based JSON parsing, includes fallback for when jq is missing, includes exit 0, passes bash -n syntax check. Test generate_hook_script() produces valid output using TEMPLATE_DEFAULT. Test with each of the 4 templates (minimal, detailed, checklist, default). Test with custom multi-line messages including special characters (quotes, backslashes, dollar signs).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:48:35.872649956Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.872649956Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1t8","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.872649956Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-1xv","title":"E2E test: fresh install flow","description":"Create tests/test_e2e_install.sh. Full end-to-end test of the install path in a clean temp HOME. Steps: 1) Set HOOK_DIR and SETTINGS_DIR to temp paths, 2) Run installer with --yes, 3) Verify hook script exists and is executable, 4) Verify settings.json has correct hook entry, 5) Verify hook produces correct output for compact source, 6) Verify hook produces no output for startup/resume/clear sources, 7) Verify --status reports all green, 8) Log every step with timestamps and full command output.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:49:22.199551339Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:22.199551339Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1xv","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:22.199551339Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1xv","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:22.199551339Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-1xv","depends_on_id":"bd-gg3","type":"blocks","created_at":"2026-01-26T21:49:22.199551339Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-23h","title":"E2E test: idempotent install behavior","description":"Create tests/test_e2e_idempotent.sh. Verify idempotency: 1) Install normally, 2) Record hook script checksum and settings.json content, 3) Run installer again (without --force), 4) Verify it detects existing install and skips, 5) Verify hook script checksum unchanged, 6) Verify settings.json unchanged, 7) Verify exit code is 0 (not an error). Also verify that running with --force DOES update the hook (different modification time). Log all output.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:50.411064849Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.411064849Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-23h","depends_on_id":"bd-1xv","type":"blocks","created_at":"2026-01-26T21:49:50.411064849Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-23h","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.411064849Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-26n","title":"Unit tests: print_banner()","description":"Create tests/test_banner.sh. Test print_banner(): outputs version string, respects QUIET flag (no output when quiet), respects NO_COLOR (no ANSI escapes), contains the project name.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:48:35.761805722Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.761805722Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-26n","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.761805722Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-27x","title":"Create test runner script","description":"Create tests/run_all_tests.sh that discovers and runs all test_*.sh files in tests/. Should support: --tap flag for TAP-format output, exit code aggregation (exit 1 if any test file fails), parallel execution option, individual test file selection via arguments, summary with pass/fail/skip counts, --verbose flag for detailed output. Model after repo_updater's scripts/run_all_tests.sh pattern.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:48:10.086330621Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:10.086330621Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27x","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:10.086330621Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2a1","title":"Unit tests: acquire_lock() and cleanup()","description":"Create tests/test_lock.sh. Test acquire_lock(): creates lock file with PID, prevents second acquisition (simulated), cleanup() removes lock file on exit. Test with stale lock file (PID of dead process) being properly overridden. Verify lock file path matches LOCK_FILE variable.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:49:22.110987451Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:22.110987451Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2a1","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:22.110987451Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2b7","title":"Unit tests: get_installed_version() and do_changelog()","description":"Create tests/test_version.sh. Test get_installed_version(): extracts correct version from a valid hook script, returns empty for script without VERSION comment, returns empty for nonexistent file. Test do_changelog(): outputs all version entries (1.2.0, 1.1.0, 1.0.0), each version has description text.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:49:01.871846061Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.871846061Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2b7","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.871846061Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2cy","title":"Unit tests: do_status()","description":"Create tests/test_status.sh. Test do_status() in isolated temp HOME: with nothing installed (reports missing), with hook script installed but no settings entry, with settings entry but no hook script, with both installed correctly, with broken hook script (not executable), STATUS_JSON=true outputs valid JSON with correct keys (hook_installed, settings_configured, deps_ok, hook_test_passed), plain text output contains expected status indicators.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:01.797580212Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.797580212Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2cy","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:01.797580212Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-2cy","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.797580212Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2ij","title":"Unit tests: do_restore() and do_diff()","description":"Create tests/test_restore_diff.sh. Test do_restore(): restores settings.json from .bak file, reports error when no backup exists, dry_run=true shows what would be restored without modifying. Test do_diff(): shows differences between installed and new hook versions, reports when no hook is installed, reports when versions match (no diff).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:49:22.022417320Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:22.022417320Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ij","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:22.022417320Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2j3","title":"E2E test: backup and restore flow","description":"Create tests/test_e2e_backup_restore.sh. Test backup/restore: 1) Create settings.json with known content, 2) Install hook (creates .bak backup), 3) Verify .bak file exists and matches pre-install content, 4) Corrupt settings.json manually, 5) Run --restore --yes, 6) Verify settings.json restored to pre-corruption state, 7) Verify restored JSON is valid. Also test: --restore when no backup exists (should error). Log each step.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:50.631500076Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.631500076Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2j3","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.631500076Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-2j3","depends_on_id":"bd-2ij","type":"blocks","created_at":"2026-01-26T21:49:50.631500076Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2ke","title":"E2E test: dry-run mode across all operations","description":"Create tests/test_e2e_dryrun.sh. Verify --dry-run never modifies the filesystem for every operation: install, uninstall, template, message, restore, update. For each: 1) Record state before (checksums of all relevant files), 2) Run with --dry-run, 3) Verify state after is identical, 4) Verify output contains '[dry-run]' markers, 5) Verify exit code is 0. Log each operation's output.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:49.949175588Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:49.949175588Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ke","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:49.949175588Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-2mb","title":"Unit tests: check_settings_has_hook()","description":"Create tests/test_settings_check.sh. Test check_settings_has_hook() with: empty settings file (returns 1), settings with no hooks key (returns 1), settings with hooks but no SessionStart (returns 1), settings with SessionStart but no post-compact-reminder hook (returns 1), settings with correct hook entry (returns 0), settings with multiple SessionStart hooks including ours (returns 0), malformed JSON (returns 1). Each test creates a temp settings.json with the specific content and calls the function.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:01.567606129Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.567606129Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2mb","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.567606129Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-32b","title":"E2E test: uninstall flow","description":"Create tests/test_e2e_uninstall.sh. Full end-to-end test: 1) Install the hook, 2) Verify installed, 3) Run --uninstall --yes, 4) Verify hook script is removed, 5) Verify settings.json no longer has hook entry, 6) Verify other settings keys are preserved (add a dummy key before uninstall), 7) Verify --status reports not installed. Log each step with timestamps.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:49:22.391298652Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:22.391298652Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-32b","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:22.391298652Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-32b","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:22.391298652Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-32b","depends_on_id":"bd-oi4","type":"blocks","created_at":"2026-01-26T21:49:22.391298652Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-33m","title":"E2E test: self-update flow","description":"Create tests/test_e2e_update.sh. Test --update: 1) Copy installer to temp location, 2) Modify its VERSION to a fake old value (e.g. 0.0.1), 3) Run --update --dry-run and verify it reports an update available, 4) Verify --update --dry-run doesn't modify the file, 5) Test that --update against real GitHub works (checks version, doesn't actually update unless versions differ). Note: full update is hard to test without a mock server, so focus on the version check, dry-run, and path resolution logic. Log all output.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:50.747140803Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.747140803Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-33m","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.747140803Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-3qb","title":"Unit tests: json_escape()","description":"Create tests/test_json_escape.sh. Test json_escape() with: plain text (no change), double quotes (escaped), backslashes (escaped), newlines (escaped to \\n), carriage returns (escaped to \\r), tabs (escaped to \\t), combined special characters, empty string.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:48:35.991129410Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.991129410Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3qb","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.991129410Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-3s8","title":"E2E test: settings.json preservation","description":"Create tests/test_e2e_settings_preservation.sh. Critical test: verify the installer never corrupts or loses existing settings. Steps: 1) Create settings.json with custom keys (permissions, env vars, other hooks), 2) Install our hook, 3) Verify ALL custom keys are preserved, 4) Verify our hook was added, 5) Uninstall, 6) Verify ALL custom keys still preserved, 7) Verify our hook was removed, 8) Verify JSON is valid throughout (python3 -m json.tool). Test with complex nested settings including PreToolUse hooks, multiple SessionStart hooks, etc. Log full settings.json at each step.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:49:50.519339042Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.519339042Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3s8","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.519339042Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-3s8","depends_on_id":"bd-gg3","type":"blocks","created_at":"2026-01-26T21:49:50.519339042Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-3s8","depends_on_id":"bd-oi4","type":"blocks","created_at":"2026-01-26T21:49:50.519339042Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-3uq","title":"Unit tests: do_completions()","description":"Create tests/test_completions.sh. Test do_completions(): bash completions output contains _install_post_compact_reminder or complete -F, zsh completions output contains compdef or #compdef, unknown shell type produces error and non-zero exit, both outputs contain all flag names (--help, --dry-run, --uninstall, --force, --template, --status, --update, etc.).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T21:49:21.913169363Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:21.913169363Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3uq","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:21.913169363Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-3vp","title":"Unit tests: dependency detection and installation","description":"Create tests/test_dependencies.sh. Test detect_dependencies() sets HAS_JQ and HAS_PYTHON correctly based on command availability. Test detect_package_manager() returns correct manager for the current system. Test check_dependencies() with allow_install=false when deps are present (should pass) and with SKIP_DEPS=true. Test install_package() error handling for unknown package managers. Note: do NOT test actual package installation (would require sudo); test the detection and decision logic only.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:48:35.815553926Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.815553926Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3vp","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:48:35.815553926Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-9ai","title":"Unit tests: do_message() and do_show_template()","description":"Create tests/test_message.sh. Test do_message() with inline message: creates hook with custom text, hook passes validation, special characters in message are preserved. Test do_message() with file message: reads message from temp file, creates valid hook, rejects nonexistent file path. Test do_show_template(): extracts and displays message from installed hook, reports error when no hook is installed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:02.028136962Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:02.028136962Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-9ai","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:02.028136962Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-9ai","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:02.028136962Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-dlt","title":"E2E test: custom message flow (--message and --message-file)","description":"Create tests/test_e2e_message.sh. Test custom messages end-to-end: 1) --message with simple text, verify hook contains it, 2) --message with special characters (quotes, newlines via $'...', dollar signs), verify proper escaping, 3) --message-file with a temp file containing multi-line message, verify hook contains it, 4) --message-file with nonexistent file (should error), 5) Verify each custom hook fires correctly for compact source, 6) Verify --show-template shows the custom message. Log all output.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:50.300081254Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:50.300081254Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-dlt","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:49:50.300081254Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-dlt","depends_on_id":"bd-9ai","type":"blocks","created_at":"2026-01-26T21:49:50.300081254Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-gg3","title":"Unit tests: add_hook_to_settings()","description":"Create tests/test_settings_add.sh. Test add_hook_to_settings(): creates new settings.json if none exists, adds hook to empty JSON {}, adds hook to existing settings with other keys (preserves them), adds hook when SessionStart already has other hooks (appends, doesn't replace), outputs 'exists' when hook already present (idempotent), creates .bak backup before modification, dry_run=true mode doesn't modify file, resulting JSON is valid (python3 -m json.tool), hook path in output matches the provided path. Verify atomic write (temp file + move pattern).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:49:01.651659142Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.651659142Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-gg3","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.651659142Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-k3t","title":"Unit tests: do_template()","description":"Create tests/test_template.sh. Test do_template() in isolated temp HOME: applies each of the 4 templates (minimal, detailed, checklist, default), creates executable hook script, hook passes test_hook() validation, rejects unknown template names with error, dry_run=true doesn't create files, updates settings.json when python3 is available. For each template, verify the generated hook contains the expected template text.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:01.947884989Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.947884989Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-k3t","depends_on_id":"bd-1t8","type":"blocks","created_at":"2026-01-26T21:49:01.947884989Z","created_by":"ubuntu","metadata":"{}","thread_id":""},{"issue_id":"bd-k3t","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.947884989Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-oi4","title":"Unit tests: remove_hook_from_settings()","description":"Create tests/test_settings_remove.sh. Test remove_hook_from_settings(): removes our hook entry from SessionStart array, preserves other SessionStart hooks, cleans up empty SessionStart array, cleans up empty hooks object, preserves other settings keys, dry_run=true mode doesn't modify file, creates .bak backup before modification, handles case where hook doesn't exist (no crash), resulting JSON is valid.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:49:01.719957972Z","created_by":"ubuntu","updated_at":"2026-01-26T21:49:01.719957972Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-oi4","depends_on_id":"bd-u1i","type":"blocks","created_at":"2026-01-26T21:49:01.719957972Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-qz4","title":"Integrate test suite into CI workflow","description":"Update .github/workflows/ci.yml to run tests/run_all_tests.sh as a proper test suite job (like repo_updater's CI). Add TAP output artifact upload, human-readable output on failure, cross-platform matrix (ubuntu + macos). Keep existing smoke tests but wire them through the new test runner. Add test-results artifact with 14-day retention.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-26T21:48:35.643337790Z","created_by":"ubuntu","updated_at":"2026-01-26T21:48:35.643337790Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-qz4","depends_on_id":"bd-27x","type":"blocks","created_at":"2026-01-26T21:48:35.643337790Z","created_by":"ubuntu","metadata":"{}","thread_id":""}]}
{"id":"bd-u1i","title":"Create test harness and helper library","description":"Create tests/ directory with a shared test helper library (tests/test_helpers.sh). Should include: colored pass/fail/skip output, assertion functions (assert_equals, assert_contains, assert_file_exists, assert_exit_code, assert_output_empty, assert_output_matches), temp directory setup/teardown, mock HOME/settings isolation so tests never touch real ~/.claude/settings.json, TAP-format output option, test counter and summary reporting, detailed per-test logging with timestamps. This is the foundation everything else depends on.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-26T21:47:56.219379703Z","created_by":"ubuntu","updated_at":"2026-01-26T21:47:56.219379703Z","source_repo":".","compaction_level":0,"original_size":0}
